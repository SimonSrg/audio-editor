<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Audio Editor</title>
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <div class="app-container">
        <header>
            <h1>Web Audio Editor</h1>
            <div class="toolbar">
                <button id="btn-upload" class="btn primary">上传音频 (MP3)</button>
                <button id="btn-add-blank" class="btn">添加空白段</button>
                <input type="file" id="file-input" accept="audio/*" multiple style="display: none;">
            </div>
        </header>

        <main>
            <div class="timeline-container">
                <div class="timeline-scroll-area" id="timeline-wrapper">
                    <canvas id="timeline-canvas"></canvas>
                    <div id="playhead"></div>
                </div>
            </div>

            <div class="playlist-container">
                <h3>播放列表 (横向拖拽排序)</h3>
                <ul id="playlist-ui" class="playlist">
                    </ul>
            </div>
        </main>

        <footer>
            <div class="controls">
                <button id="btn-prev" class="btn-icon">⏮</button>
                <button id="btn-play" class="btn-icon play">▶</button>
                <button id="btn-next" class="btn-icon">⏭</button>
                <span id="time-display">00:00.00 / 00:00.00</span>
            </div>
            <div class="export-controls">
                <label>
                    开始(s): <input type="number" class="input" id="export-start" value="0" step="0.1">
                </label>
                <label>
                    结束(s): <input type="number" class="input" id="export-end" value="0" step="0.1">
                </label>
                <button id="btn-export" class="btn success">导出 MP3</button>
            </div>
        </footer>
    </div>

    <div id="custom-modal" class="modal-overlay" style="display: none;">
        <div class="modal-box">
            <h3>添加空白音频段</h3>
            <div class="form-group">
                <label for="modal-duration-input">时长 (秒):</label>
                <input type="number" id="modal-duration-input" value="2" min="0.1" step="0.1">
            </div>
            <div class="modal-actions">
                <button id="modal-btn-cancel" class="btn">取消</button>
                <button id="modal-btn-confirm" class="btn primary">确定</button>
            </div>
        </div>
    </div>

    <div id="trim-modal" class="modal-overlay" style="display: none;">
        <div class="modal-box">
            <h3>裁剪音频</h3>
            <p id="trim-filename" style="color: #999; font-size: 12px; margin-bottom: 10px;"></p>
            
            <div class="form-group">
                <label>原始时长:</label>
                <span id="trim-original-duration" style="color: var(--primary);">00:00</span>
            </div>

            <div class="form-group">
                <label>开始时间 (s):</label>
                <input type="number" id="trim-start-input" min="0" step="0.1">
            </div>
            <div class="form-group">
                <label>结束时间 (s):</label>
                <input type="number" id="trim-end-input" min="0" step="0.1">
            </div>

            <div class="modal-actions">
                <button id="trim-btn-cancel" class="btn">取消</button>
                <button id="trim-btn-confirm" class="btn primary">确认裁剪</button>
            </div>
        </div>
    </div>

    <script src="js/event-bus.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/main.js"></script>
</body>
</html>